{% extends "Base.html" %}

{% block content %}

<!-- Custom CSS for additional styling -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.1/dist/aos.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css">

<style>
    body {
        font-family: 'Arial', sans-serif;
        background-color: #f8f9fa;
        color: #333;
    }

    /* Jumbotron Section */
    .jumbotron {
        background: url('https://source.unsplash.com/1600x900/?technology,fruits') no-repeat center center;
        background-size: cover;
        color: #fff;
        text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
        padding: 5rem 2rem;
        border-radius: 0.5rem;
        margin-bottom: 2rem;
    }

    .jumbotron h1 {
        font-size: 4rem;
    }

    .jumbotron .btn {
        background-color: #ff6600;
        border: none;
        padding: 0.75rem 2rem;
        font-size: 1.25rem;
    }

    .container {
        max-width: 1200px;
        margin: auto;
    }

    /* Card Design */
    .card {
        transition: transform 0.2s ease-in-out;
        border: none;
        border-radius: 0.75rem;
        overflow: hidden;
    }

    .card:hover {
        transform: scale(1.05);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    /* File Upload */
    .upload-btn-wrapper {
        position: relative;
        overflow: hidden;
        display: inline-block;
    }

    .upload-btn-wrapper input[type=file] {
        font-size: 100px;
        position: absolute;
        left: 0;
        top: 0;
        opacity: 0;
    }

    .file-upload-btn {
        background-color: #007bff;
        color: white;
        padding: 0.75rem 2rem;
        border: none;
        border-radius: 0.5rem;
        font-size: 1.25rem;
    }

    /* Footer */
    footer {
        background-color: #343a40;
        padding: 2rem 0;
        color: #fff;
    }

    footer a {
        color: #ff6600;
        text-decoration: none;
    }

    footer a:hover {
        text-decoration: underline;
    }

    /* Animations */
    [data-aos] {
        opacity: 0;
        transition-property: transform, opacity;
        transition-duration: 1s;
        transition-timing-function: ease;
    }

    /* Make sure the cards and other sections adjust well on mobile screens */
    @media (max-width: 768px) {
        .jumbotron h1 {
            font-size: 2.5rem;
        }
        .card {
            margin-bottom: 1rem;
        }
    }
</style>

<body>

  <!-- Jumbotron / Hero Section -->
  <div class="jumbotron text-center" data-aos="fade-in" data-aos-delay="100">
      <h1 class="display-3">Welcome to ByteCode!</h1>
      <p class="lead">Your hub for fruit prediction and quality analysis using Deep Learning models.</p>
      <a href="#about" class="btn btn-warning mt-4 animate__animated animate__bounce animate__infinite">Learn More</a>
  </div>

  <!-- Features Section -->
  <section class="container my-5">
      <div class="row">
          <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="200">
              <div class="card text-center">
                  <i class="fas fa-apple-alt fa-4x text-success py-4"></i>
                  <div class="card-body">
                      <h5 class="card-title">Apple Prediction</h5>
                      <p class="card-text">Upload an image of an apple and check its freshness and quality using our predictive model.</p>
                  </div>
              </div>
          </div>
          <!-- Banana Prediction -->
          <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="300">
            <div class="card text-center">
                <img src="{{ url_for('static', filename='download.jpeg') }}" class="card-img-top img-fluid" alt="Banana Image" style="width: 100px; height: 100px; margin: 20px auto;">
                <i class="fas fa-banana fa-4x text-warning py-4"></i>
                <div class="card-body">
                    <h5 class="card-title">Banana Prediction</h5>
                    <p class="card-text">Our model helps you determine whether your banana is fresh or rotten with a single click.</p>
                </div>
            </div>
          </div>
          <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="400">
              <div class="card text-center">
                <img src="{{ url_for('static', filename='orange.png') }}" class="card-img-top img-fluid" alt="Orange Image" style="width: 100px; height: 100px; margin: 20px auto;">
                  <i class="fas fa-orange fa-4x text-danger py-4"></i>
                  <div class="card-body">
                      <h5 class="card-title">Orange Prediction</h5>
                      <p class="card-text">Upload your orange image to find out if it's still fresh using our cutting-edge deep learning model.</p>
                  </div>
              </div>
          </div>
      </div>
  </section>

  <!-- About Section -->
<section id="about" class="bg-light py-5">
    <div class="container text-center">
        <h2 class="mb-5" data-aos="fade-up" data-aos-delay="100">About Our Platform</h2>
        <p class="lead text-muted" data-aos="fade-up" data-aos-delay="200">
            ByteCode is a web-based platform that uses deep learning techniques to analyze fruit images and predict their freshness and quality. Whether it's apples, bananas, or oranges, our model provides accurate predictions at your fingertips.
        </p>
    </div>
</section>

<!-- Image Upload Section -->
<section class="container py-5">
    <div class="text-center mb-5">
        <h3 class="mb-3" data-aos="fade-up" data-aos-delay="100">Upload Your Image</h3>
        <p class="text-muted" data-aos="fade-up" data-aos-delay="200">Drag and drop or choose an image of a fruit.</p>
    </div>

    <form action="{{ url_for('pred') }}" method="POST" enctype="multipart/form-data" data-aos="fade-up" data-aos-delay="300">
        <div class="row">
            <!-- Upload Box -->
            <div class="col-md-6 d-flex justify-content-center">
                <div class="upload-box" id="upload-box" ondrop="dropHandler(event);" ondragover="dragOverHandler(event);">
                    <p>Drag & Drop Image Here</p>
                    <input type="file" id="fileInput" name="file" accept="image/*" onchange="previewImage(event)" hidden>
                    <button type="button" class="btn btn-primary" onclick="document.getElementById('fileInput').click();">Choose an Image</button>
                </div>
            </div>

            <!-- Image Preview Box -->
            <div class="col-md-6 d-flex justify-content-center">
                <div class="preview-box" id="preview-box">
                    <p>Preview</p>
                    <img id="image-preview" src="#" alt="Image Preview" style="display:none; max-width: 100%; height: auto;">
                </div>
            </div>
        </div>

        <!-- Confirm Checkbox -->
        <div class="text-center mt-4" data-aos="fade-up" data-aos-delay="400">
            <input type="checkbox" id="confirmCheck" class="form-check-input" onchange="toggleSubmit()" disabled>
            <label for="confirmCheck">I confirm the image is of Apple, Banana, or Orange.</label>
        </div>

        <!-- Buttons -->
        <div class="text-center mt-4" data-aos="fade-up" data-aos-delay="500">
            <button type="button" class="btn btn-success" id="confirm-btn" onclick="confirmImage()" disabled>Confirm</button>
            <input type="submit" class="btn btn-secondary" value="Submit and Predict" id="submit-btn" disabled>
        </div>

        <!-- Loading Spinner -->
        <div class="text-center mt-4" style="display: none;" id="loading-spinner">
            <i class="fas fa-spinner fa-spin fa-3x"></i>
            <p>Processing your image, please wait...</p>
        </div>
    </form>
</section>
<!-- Add this button inside the body of your home.html file -->
<a href="{{ url_for('product_predict') }}" class="btn btn-primary">Product Predict</a>

<!-- Prediction Result Section -->
<div id="prediction-result" class="text-center mt-5" data-aos="fade-up" data-aos-delay="600">
    <!-- This will be dynamically filled after prediction -->
</div>

<!-- Footer Section -->
<footer class="text-center">
    <div class="container">
        <p class="lead mb-0">Thank you for visiting ByteCode! &copy; 2024</p>
        <p>Follow us on <a href="https://github.com/your-github" target="_blank">GitHub</a> | <a href="https://twitter.com/your-twitter" target="_blank">Twitter</a></p>
    </div>
</footer>

<!-- JavaScript for Image Preview, Confirmation, and Submit Logic -->
<script>
    function previewImage(event) {
        var reader = new FileReader();
        reader.onload = function () {
            var output = document.getElementById('image-preview');
            output.src = reader.result;
            output.style.display = 'block';
            document.getElementById('confirm-btn').disabled = false;
        };
        reader.readAsDataURL(event.target.files[0]);
    }

    function confirmImage() {
        var imageUrl = document.getElementById('image-preview').src;
        if (imageUrl) {
            var confirmed = confirm("Is this image an apple, banana, or orange?");
            if (confirmed) {
                document.getElementById('confirmCheck').disabled = false;
                document.getElementById('confirmCheck').checked = true;
                toggleSubmit();
            } else {
                alert("Please upload an image of an apple, banana, or orange.");
                document.getElementById('confirmCheck').checked = false;
                document.getElementById('submit-btn').disabled = true;
            }
        }
    }

    function toggleSubmit() {
        document.getElementById('submit-btn').disabled = !document.getElementById('confirmCheck').checked;
    }

    // Drag and Drop Handlers
    function dropHandler(event) {
        event.preventDefault();
        var fileInput = document.getElementById('fileInput');
        fileInput.files = event.dataTransfer.files;
        previewImage(event);
    }

    function dragOverHandler(event) {
        event.preventDefault();
    }

    document.querySelector('form').addEventListener('submit', function () {
        document.getElementById('submit-btn').style.display = 'none';
        document.getElementById('loading-spinner').style.display = 'block';
    });
</script>

<!-- CSS for better UI/UX -->
<style>
    .upload-box, .preview-box {
        border: 2px solid #ccc;
        padding: 40px;
        text-align: center;
        width: 100%;
        max-width: 400px;
        height: 300px;
        transition: border 0.3s;
    }

    .upload-box:hover, .preview-box:hover {
        border-color: #007bff;
    }

    .preview-box p {
        font-size: 1.2em;
        margin-bottom: 10px;
    }

    #confirm-btn, #submit-btn {
        margin-top: 10px;
        width: 150px;
    }

    #loading-spinner p {
        margin-top: 10px;
        font-size: 1.2em;
    }
</style>

<!-- JavaScript and Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.1/dist/aos.js"></script>

<script>
    AOS.init({
        duration: 1200,
    });
</script>
{% endblock %}